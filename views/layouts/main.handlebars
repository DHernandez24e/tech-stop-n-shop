<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Stop-N-Shop</title>
    <link rel="stylesheet" href="/css/dark-mode.css" />
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/open-iconic/1.1.0/font/css/open-iconic-bootstrap.min.css" />    
  </head>

  <body>
    <div class="wrapper">
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand dark-mode-light-text" href="/">Tech Stop-N-Shop</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="oi oi-menu"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link dark-mode-light-text" href="/products">Products</a>
            </li>
            {{#if loggedIn}}
            <li class="nav-item active">
              <button id="logout" class="btn dark-mode-light-text">Logout</button>
            </li>
            <li class="nav-item active">
              <a class="nav-link dark-mode-light-text" href="/profit">Profit Page</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link dark-mode-light-text" href="/product-inventory">Product Inventory</a>
            </li> 
            {{else}}
            <li class="nav-item active">
              <a class="nav-link dark-mode-light-text" href="/login" id="login">Login</a>
            </li>
            {{/if}}
            {{!-- MIT licensed code for dark mode https://github.com/coliff/dark-mode-switch --}}
            <li class="nav-item active custom-control custom-switch my-auto">
              <input type="checkbox" class="custom-control-input" id="darkSwitch" />
              <label class="custom-control-label" for="darkSwitch"><span class="oi oi-contrast" title="oi-contrast" aria-hidden="true"></span></label>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0 mr-2">
            <input class="form-control mr-sm-2" type="text" id="search-field" placeholder="Search By Keyword" aria-label="Search" style="width: 200px;">
            <button class="btn btn-outline-success my-2 my-sm-0 dark-mode-light-text" id="search-btn" type="submit"><span class="oi oi-magnifying-glass"></span></button>
          </form>
            <button type="button" class="btn btn-primary " data-toggle="modal" data-target="#cart"><span class="oi oi-cart"></span> (<span class="total-count"></span>)</button></div>
        </div>
      </nav>
    </header>
    <main class="mt-5">
      <!-- Modal -->
      <div class="modal fade" id="cart" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title dark-mode-dark-text" id="exampleModalLabel">Cart</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <table class="show-cart table">
                
              </table>
              <div class="dark-mode-dark-text">Total price: $<span class="total-cart"></span></div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button class="clear-cart btn btn-danger">Clear Cart</button>
              <button type="button" id="checkout" class="btn btn-primary">Order now</button>
            </div>
          </div>
        </div>
      </div> 

    {{!-- loading these before body since some views have separate functions that require jquery --}}
    <script src="/javascript/jquery-3.5.1.slim.min.js"></script>
    <script src="/javascript/popper.min.js"></script>
    <script src="/javascript/bootstrap.min.js"></script>

    {{{ body }}}
    
    </main>
    <footer>
      Thanks for visiting!
    </footer>
    </div>

    {{!-- scripts --}}
    {{#if loggedIn}}
    <script src="/javascript/logout.js"></script>
    {{/if}}
    <script src="/javascript/homepage.js"></script>
    <script src="/javascript/search.js"></script>
    <script src="/javascript/dark-mode-switch.js"></script>
  </body>
</html>